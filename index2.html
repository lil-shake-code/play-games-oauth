<html>
  <body>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <div
      id="g_id_onload"
      data-client_id="932160326621-vjcl3nd50k6ucgj8p5tflcjfomiqhg9e.apps.googleusercontent.com"
      data-callback="handleCredentialResponse"
    ></div>
    <div class="g_id_signin" data-type="standard"></div>
    <script>
      function handleCredentialResponse(response) {
        // console.log("handleCredentialResponse", response);
        // Get the access token and make the API request to  play games api
        var credential = response.credential;
        var oauthToken = credential.split("=");
        var accessToken = oauthToken[1];
        //make request to play games api and get the player profile
        var xhr = new XMLHttpRequest();
        xhr.open(
          "GET",
          "https://www.googleapis.com/games/v1/players/me?access_token=" +
            accessToken
        );
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4) {
            var data = JSON.parse(xhr.responseText);
            console.log(data);
          }
        };
        xhr.send();
      }
    </script>
  </body>
</html>
